---
docname: draft-westerlund-moq-overview-latest
title: "Media over QUIC Overview"
abbrev: MoQ Overview
obsoletes:
cat: std
ipr: trust200902
wg: moq
area: WIT
submissiontype: IETF  # also: "independent", "IAB", or "IRTF"

venue:
  group: Media over QUIC (MOQ)
  mail: moq@ietf.org
  github: https://github.com/gloinul/draft-westerlund-moq-overview

author:
-
   ins:  M. Westerlund
   name: Magnus Westerlund
   org: Ericsson
   email: magnus.westerlund@ericsson.com

   ins: Z. Sarker
   name: Zaheduzzaman Sarker
   org: Nokia
   email: zaheduzzaman.sarker@nokia.com

informative:

   RFC9000:
   RFC9605:
   I-D.ietf-moq-transport:
   I-D.ietf-moq-warp:
   I-D.ietf-webtrans-overview:
   I-D.jennings-moq-secure-objects:
   I-D.ietf-moq-loc:
   I-D.jcenzano-moq-mi:

normative:


--- abstract

This document provides a high level overview of Media over QUIC
protocol components, how interoperability is specified for particular
use cases, and how things relate.


--- middle

# Introduction {#introduction}

Media over QUIC (MoQ) is an IETF Working Group (WG). Its output of set 
of specifications that
is inteded to be useable to address use cases related to
media delivery over the Internet, including low-latency delivery. This document 
provides a high level overview of
how these components relates to each other and what is needed for a specific
use case to define an interoperable media delivery solution.

The protocol work

## Use Cases

The development of the MoQ components considers the following use
cases and their main requirements. However, this may not prevent
the MoQ protocol components to be used for other use cases than what is
listed here.

In general the goal of the solution is enable ease of dynamic scaling
of number of participanting endpoints and distributed cloud deployments.
The solution only assumes existance of unicast IP transport between involved
nodes.

### Live Streaming Media Delivery


### Real-time Conferencing


### Content Contribution and Primary Distribution




# Media Over QUIC overview

MoQ consists of several different components, which allows
the design of various applications. We provide below an overview
of these components after discussing the involved type of nodes.

## Data Model





## Nodes

Consumer: An endpoint that want to consume (receive) one or more
       tracks from one or more track namespaces.

Publisher: An endpoint that can send a consumer one or more tracks for
       a given track namespace.

Original Publisher: The endpoint is the originator of one or more
       tracks for a particular track namespace.

Relay: An endpoint that is both a consumer and a publisher, but not an
       orignal publisher. The Relay acts between the orignal
       publisher and a consumer endpoint. Relays can also use another
       relay as publisher to enable scaling of the publisher nodes, as
       well as to handle geographical distribution of receivers to
       optimize performance.

## Media Over QUIC Transport

Media over QUIC Transprot (MOQT) {{I-D.ietf-moq-transport}} is the
protocol, which is used between a publisher and a consumer. The
protocol supports a couple of different capabilities:

Subscribe: Request the publisher to forward media objects of a media
       track as they are created or received from upstream publisher. 
       Subscribe is the support for any future distribution of media 
       generated by a Publisher.

Fetch: Request the publisher to provide a specific range of media
       objects for a track that the publisher has previously received
       or stored.

Announce: A publisher announces a track namespace, which is available
       for subscribe and fetch to the consumer.

When the consumer is subscribed to a track, the publisher tries to
forward all media objects of the track scheduling the transmission
according to priorities on the different objects competing for
available transport bitrates across all tracks the consumer is
subscribed to.

MOQT uses either QUIC {{RFC9000}} or WebTransport
{{I-D.ietf-webtrans-overview}} to transport its messages and media
objects. These transport protocols also are used to provide hop-by-hop
confidentiality and integrity.

MOQT is dependent on existing methods for authorization and
authentication of the consumer and publisher to ensure that they have
the right to either access a track or publish a track in this 
namespace. This mechanism has not yet been defined.

The media objects related to a track are delivered over either
independent streams or using unreliable datagrams depending on what
best suits the media and application when it comes to latency and
reliability.

Note: Add something about what happens when there are insufficinet
bandwidth.


## Catalog

The catalog is a media track, which carries essentially some textual
information to enable the
application to understand what track names exists in a track
namespace. The catalog describes, for each track, some key properties
such as peak bitrate and encoding format for video tracks. It can also
carry information to relate one track to another track, for example lip
synch.

A catalog is not necessary for all applications, as the application
may have a fixed track name structure with known encodings and properties.

The WARP streaming format {{I-D.ietf-moq-warp}} defines
one catalog format, which is specific to WARP. Yet, this catalog is expected
to be the basis for other formats and to be extended for other
applications. It is up to the application specifications to
define which catalog format they use.

## Media Formats

MoQT treats media objects as opaque payloads. The transport protocol does not
impose restrictions on the encoding format of these media objects. Instead, 
interpretation of the object payload is left to the application, which must 
ensure compatibility with the decoding capabilities of the consumer endpoint.

To foster interoperability, the MoQ community has initiated standardization 
efforts around specific media formats. Currently, the primary supported format 
is the Low Overhead Container (LOC) {{I-D.ietf-moq-loc}}, as defined by the 
WebCodecs API. LOC provides minimal packaging overhead and facilitates low-latency 
media transport, making it suitable for real-time applications such as live 
streaming and video conferencing.

The MoQ Media Interop (moq-mi) {{I-D.jcenzano-moq-mi}} draft specifies a  
number of media formats for use with LOC, including:
- Video H264 in AVCC
- Audio Opus Bitstream 
- UTF-8 Text
- Audio AAC-LC in MPEG4

Each of these media types is assigned a specific identifier and is accompanied 
by metadata header extensions to convey essential decoding parameters (e.g., 
timestamps, duration, and codec configuration).

While these formats represent the current scope of interoperable media, the MoQ 
community recognizes the wide adoption of CMAF (Common Media Application Format) 
in traditional streaming workflows. There is ongoing discussion around defining 
a MoQ media format based on CMAF, though no concrete proposal has been adopted 
as of now.

## End-to-End Object Security

MOQT provides only hop-by-hop confidentiality and integrity
protection. It has been expected that some applications want stronger
security properties, like end-to-end confidentiality as well as source
authentication. To meet these goals, {{I-D.jennings-moq-secure-objects}} 
proposes that each
media object's payload is encapsualted in an SFRAME {{RFC9605}}.

Keying and cipher negotiation is currently application specific.

## Application Interopability

One or more application sharing the same needs for how MoQ
operates can define a interoperaiblity point. An interoperability
point is defining which components and their versions that is need to
be supported to be interoperable.

The WARP Streaming Format {{I-D.ietf-moq-warp}} is such
an interoperability point that defines the following:

- The media format is LOC and with additional requirements such
  that audio and video can be time aligned.

- A Catalog format to describe the tracks.

- That MOQT as defined in {{I-D.ietf-moq-transport}} is used for Media
- transmission.

# Subscriber <--> Publisher interaction
Describe how subscribers are intented to know about publisher (directly 
or via relays).
## Discovery
## Session setup
## Object metadata extension handling

# Publisher <--> 3rd party relay interaction
Describe how relays are intregated to and initialized by the publisher.
## Discovery
## Session setup
## Object metadata extension handling

# Contributors

# Acknowledgments


--- back

